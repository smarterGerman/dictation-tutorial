<!DOCTYPE html>
<!--
    GERMAN DICTATION TOOL - MODULAR VERSION
    
    This is the modern, modular implementation of the German Dictation Tool.
    
    📁 Architecture:
    - Clean HTML structure (minimal, semantic)
    - Separate CSS file (css/styles.css)
    - Modular ES6 JavaScript (js/modules/*.js)
    - Configuration-driven (js/config.js)
    
    🚀 Features:
    - Same functionality as original version
    - Better code organization and maintainability
    - ES6 modules for tree-shaking and performance
    - Easier testing and debugging
    
    💡 Usage:
    - Main application file - use this for development
    - Requires modern browser with ES6 module support
    - Serve via HTTP server (python3 -m http.server 8000)
    
    📚 See README.md for complete documentation
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>German Dictation Tool - Modular Version</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
     <!-- LOADING OVERLAY -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loadingText" style="display:none;">Initializing...</div>
            <div class="loading-error" id="loadingError" style="display: none;">
                <div class="error-message" id="errorMessage"></div>
                <button class="retry-btn" id="retryBtn">Try Again</button>
            </div>
        </div>
    </div>
    <div class="container">        
        <div class="content">
            <!-- AUDIO SECTION -->
            <div class="audio-section">
                <div class="audio-controls">
                    <div class="player-pill">
                        <button class="nav-btn" id="prevBtn" title="Previous sentence">‹</button>
                       <button class="play-btn" id="playBtn" title="Play/Pause (double-click to restart)"></button>
                        <button class="nav-btn" id="nextBtn" title="Next sentence">›</button>
                        <button class="toggle-btn" id="ignoreCaseBtn" title="Capitalization checking OFF">Aa</button>
                        <button class="toggle-btn" id="focusModeBtn" title="Focus Mode OFF - Show live feedback">
                            <span class="focus-icon"></span>
                        </button>
                        <<button class="toggle-btn" id="speedBtn" title="Playback Speed">100</button>
                        <button class="tutorial-btn-launcher" id="tutorialLauncher" title="Open Tutorial">i</button>
                    </div>
                    
                    <!-- Progress bar and controls row -->
                    <div class="progress-controls-row">
                        <button class="toggle-btn secondary-btn" id="hintBtn" title="Show expected sentence">?</button>
                        <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
                        <span id="timeDisplay">0:00 / 0:00</span>
                        <button class="toggle-btn secondary-btn" id="endDictationBtn" title="End dictation & show stats">X</button>
                    </div>
                </div>
                <audio id="audioPlayer" preload="auto"></audio>
            </div>

            <!-- TEXT & FEEDBACK -->
            <div class="text-section">
                <!-- Hint display area - only appears when needed -->
                <div class="hint-display" id="hintDisplay" style="display: none;">
                    <div class="hint-content" id="hintContent"></div>
                </div>
                
                <div class="input-area">
                    <div class="live-feedback" id="liveFeedback">Live Feedback</div>
                    <textarea class="input-field" id="userInput" placeholder=""></textarea>
                </div>

                <div class="options">
                    <!-- Options moved to audio controls -->
                </div>

                <div class="reference-text" id="referenceText"></div>
            </div>

            <!-- STATS & CONTROLS -->
            <div class="stats-section">
                <div class="stats-with-export" id="statsSection" style="display:none;">
                    <div class="stats-header">
                        <div class="stats-title">Results</div>
                        <div class="stats-actions">
                            <button class="stats-action-btn restart-btn" id="restartBtn" title="Restart dictation">↻</button>
                            <button class="stats-action-btn export-btn" id="exportCsvBtn" title="Export CSV">CSV</button>
                        </div>
                    </div>
                    <div class="stats">
                        <div class="stat-item"><span class="stat-label">Accuracy</span><span class="stat-value" id="accuracyPercent">0%</span></div>
                        <div class="stat-item"><span class="stat-label">Correct</span><span class="stat-value" id="correctWords">0</span></div>
                        <div class="stat-item"><span class="stat-label">Wrong</span><span class="stat-value" id="wrongWords">0</span></div>
                        <div class="stat-item"><span class="stat-label">Time</span><span class="stat-value" id="timeTaken">0:00</span></div>
                    </div>
                </div>

                <!-- Detailed sentence results -->
                <div class="sentence-results" id="sentenceResults" style="display:none;">
                    <div class="sentences-container" id="sentencesContainer">
                        <!-- Sentences will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Modular JavaScript -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
